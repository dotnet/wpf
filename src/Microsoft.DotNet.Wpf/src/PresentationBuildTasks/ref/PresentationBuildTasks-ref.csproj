<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <AssemblyName>PresentationBuildTasks</AssemblyName>
    <PackageId>PresentationBuildTasks-ref</PackageId>
    <TargetOutputRelPath>$(TargetGroup)-$(PackageId)/</TargetOutputRelPath>
    <TargetFrameworks>net472;netcoreapp2.1</TargetFrameworks>
    <EnablePInvokeAnalyzer>true</EnablePInvokeAnalyzer>
    <!-- 
      Clear AssemblyVersion => it will ensure that the AssemblyVersion is > 4.0.0.0.
      In turn, this will ensure that the net4x PresentationBuildTasks.dll 
      is always loaded directly instead of being matched against the GAC copy of the
      PresentationBuildTasks 4.0.0.0 that comes form the .NET Framework. 
      -->
    <AssemblyVersion />
    <!--
            Suppressed Compiler Warnings: 

                CS1058: A previous catch clause already catches all exceptions. All exceptions 
                thrown will be wrapped in a System.Runtime.CompilerServices.RuntimeWrappedException 
    -->
    <NoWarn>$(NoWarn);1058</NoWarn>
    <ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>None</ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>
    <DefineConstants>$(DefineConstants);PBTCOMPILER;PARSERM8BC;NEWLOADER;IGNORABLESUPPORT;ONLYMARKUPEXTENSIONS</DefineConstants>
    <BinPlaceRuntime>false</BinPlaceRuntime>
    <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
    <GenerateBindingRedirectsOutputType>true</GenerateBindingRedirectsOutputType>
    <Platforms>AnyCPU;x64</Platforms>
  </PropertyGroup>
  <ItemGroup Condition="$(TargetFramework.StartsWith('net4'))">
    <Reference Include="mscorlib" />
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.Build.Framework" Version="$(MicrosoftBuildFrameworkPackageVersion)" />
    <PackageReference Include="Microsoft.Build.Utilities.Core" Version="$(MicrosoftBuildUtilitiesCorePackageVersion)" />
    <PackageReference Include="System.Reflection.MetadataLoadContext" Version="$(SystemReflectionMetadataLoadContextVersion)" />
    <!-- 
      Provide specific/old versions for PresentationBuildTasks which needs to run inside MSBuild
    -->
    <PackageReference Include="System.CodeDom" Version="4.4.0" />
  </ItemGroup>
</Project>
