<Project>
  <!-- 
    Explicitly import Microsoft.NETCore.Platforms to prevent using the one from the SDK, which
    usually lags behind the version that WPF gets from CoreFx packages
  -->
  <ItemGroup>
    <PackageReference Include="Microsoft.NETCore.Platforms"
                      Version="$(MicrosoftNETCorePlatformsVersion)"
                      Condition="'$(MSBuildProjectExtension)'!='.vcxproj' or '$(ManagedCxx)'=='true'"/>

    <!--
      Workaround - this should be removed when our tests are converted from Microsoft.NET.Sdk.WindowsDesktop => Microsoft.NET.Sdk
      project
    -->
    <KnownFrameworkReference Remove="Microsoft.AspNetCore.App" />
  </ItemGroup>

  <!-- The below logic intentionally doesn't consider multiple .NETCoreApp TFMs as that isn't necessary at this point. -->
  <PropertyGroup>
    <UseOOBNETCoreAppTargetingPack Condition="'$(UseOOBNETCoreAppTargetingPack)' == '' and '$(MicrosoftNETCoreAppRefVersion)' != ''">true</UseOOBNETCoreAppTargetingPack>
    <UseOOBNETCoreAppRuntimePack Condition="'$(UseOOBNETCoreAppRuntimePack)' == '' and '$(MicrosoftNETCoreAppRuntimewinx64Version)' != ''">true</UseOOBNETCoreAppRuntimePack>
    <UseOOBNETCoreAppAppHostPack Condition="'$(UseOOBNETCoreAppAppHostPack)' == '' and '$(MicrosoftNETCoreAppRuntimewinx64Version)' != ''">true</UseOOBNETCoreAppAppHostPack>
  </PropertyGroup>

  <ItemGroup>
    <KnownFrameworkReference Update="Microsoft.NETCore.App">
      <TargetingPackVersion Condition="'$(UseOOBNETCoreAppTargetingPack)' == 'true'">$(MicrosoftNETCoreAppRefVersion)</TargetingPackVersion>
      <DefaultRuntimeFrameworkVersion Condition="'$(UseOOBNETCoreAppRuntimePack)' == 'true'">$(MicrosoftNETCoreAppRuntimewinx64Version)</DefaultRuntimeFrameworkVersion>
      <LatestRuntimeFrameworkVersion Condition="'$(UseOOBNETCoreAppRuntimePack)' == 'true'">$(MicrosoftNETCoreAppRuntimewinx64Version)</LatestRuntimeFrameworkVersion>
    </KnownFrameworkReference>

    <KnownRuntimePack Update="Microsoft.NETCore.App"
                      LatestRuntimeFrameworkVersion="$(MicrosoftNETCoreAppRuntimewinx64Version)"
                      Condition="'$(UseOOBNETCoreAppRuntimePack)' == 'true'" />

    <KnownAppHostPack Update="Microsoft.NETCore.App"
                      AppHostPackVersion="$(MicrosoftNETCoreAppRuntimewinx64Version)"
                      Condition="'$(UseOOBNETCoreAppAppHostPack)' == 'true'" />
  </ItemGroup>

</Project>
